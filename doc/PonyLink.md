# PonyLink

## Parameter

* Clock: Master 25MHz, Slave 33MHz
* Parbits: 4
* Data Width: 8
* User Width:
  * Data channels: 1
  * Control channel: 4, packs `{m_axis_tid, m_axis_tkeep}`
* Timings (generated by `python timings.py 10 7.576 1 1`)
  * MASTER_TIMINGS: `80'h09070503010907050301`
  * SLAVE_TIMINGS: `80'h0d0a0705020b09060301`
* Controll channel AXI MM2S:
  * AXI ID Width: 12
  * AXI Data Width: 32
  * AXI-S Data Width: 1 byte

## Pin Assignment

| Channel |      Signal       |      PCB Net       | Driver | Zynq Pin | Artix Pin |
| :-----: | :---------------: | :----------------: | :----: | :------: | :-------: |
|    1    |     data_pin      |    cpld_emu_wrn    |        |   AA12   |    L8     |
|    1    | master_link_error |       led[0]       |  Zynq  |   Y15    |    A17    |
|    1    | slave_link_error  |       led[8]       | Artix  |   Y11    |    C17    |
|    2    |     data_pin      |    cpld_emu_rdn    |        |   AA9    |    M6     |
|    2    | master_link_error |       led[1]       |  Zynq  |   Y14    |    G16    |
|    2    | slave_link_error  |       led[9]       | Artix  |   V10    |    F17    |
|    3    |     data_pin      |   cpld_emu_tbre    |        |   AB12   |    L5     |
|    3    | master_link_error |       led[2]       |  Zynq  |   W12    |    E16    |
|    3    | slave_link_error  |      led[10]       | Artix  |   V12    |    B17    |
|    4    |     data_pin      |   cpld_emu_tsre    |        |   AB15   |    L7     |
|    4    | master_link_error |       led[3]       |  Zynq  |   Y16    |    H17    |
|    4    | slave_link_error  |      led[11]       | Artix  |   W15    |    D19    |
|    C    |     data_pin      | cpld_emu_dataready |        |   U12    |    L4     |
|    C    | master_link_error |       led[4]       |  Zynq  |   Y20    |    G17    |
|    C    | slave_link_error  |      led[12]       | Artix  |   Y19    |    A18    |

## Link Summary

```
** TIMING SPECIFICATION SUMMARY **
    Master clock: 10.000 ns (100.00 MHz)
    Slave clock: 7.576 ns (132.00 MHz)
    Master->Slave pulse jitter: 1.000 ns
    Slave->Master pulse jitter: 1.000 ns

** FINDING TIMING CONFIG FOR DIRECTION 'MASTER -> SLAVE' **
Timing for transmit_period=10.000 ns (100.00 MHz) and sample_period=7.576 ns (132.00 MHz)
    transmit timings: [1, 3, 5, 7, 9]
     1 -  2 identical samples  -> 1 bit
     3 -  5 identical samples  -> 2 bits
     6 -  7 identical samples  -> 3 bits
     9 - 10 identical samples  -> 4 bits
    11 - 13 identical samples  -> 5 bits
Bitrate vs. pulse length:
    @1: 100.00 MBit/s  (expected 32%)
    @2:  66.67 MBit/s  (expected 36%)
    @3:  60.00 MBit/s  (expected 21%)
    @4:  57.14 MBit/s  (expected  7%)
    @5:  55.56 MBit/s  (expected  1%)
    ==>  75.25 MBit/s  (expected avg.)
TRANSMIT TIMINGS: [1, 3, 5, 7, 9]
SAMPLE TIMINGS: [1, 3, 6, 9, 11]

** FINDING TIMING CONFIG FOR DIRECTION 'SLAVE -> MASTER' **
Timing for transmit_period=7.576 ns (132.00 MHz) and sample_period=10.000 ns (100.00 MHz)
    transmit timings: [2, 5, 7, 10, 13]
     1 -  2 identical samples  -> 1 bit
     3 -  4 identical samples  -> 2 bits
     5 -  6 identical samples  -> 3 bits
     7 -  8 identical samples  -> 4 bits
     9 - 10 identical samples  -> 5 bits
Bitrate vs. pulse length:
    @1:  66.00 MBit/s  (expected 32%)
    @2:  52.80 MBit/s  (expected 36%)
    @3:  56.57 MBit/s  (expected 21%)
    @4:  52.80 MBit/s  (expected  7%)
    @5:  50.77 MBit/s  (expected  1%)
    ==>  57.91 MBit/s  (expected avg.)
TRANSMIT TIMINGS: [2, 5, 7, 10, 13]
SAMPLE TIMINGS: [1, 3, 5, 7, 9]

** CORE CONFIGURATION **
.MASTER_TIMINGS(80'h09070503010907050301),
.SLAVE_TIMINGS(80'h0d0a0705020b09060301)
```

